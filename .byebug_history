exit
pp ThingImage.with_caption.with_name.slice(1,1).first.attributes; nil
pp ThingImage.with_name.slice(1,1).first.attributes; nil
pp ThingImage.with_caption.slice(1,1).first.attributes; nil
pp ThingImage.select("thing_images.*, images.caption as image_caption, things.name as thing_name").joins(:image, :thing).find(ti.id).attributes;nil
ti.image.caption
ti.image_caption
pp ThingImage.select("thing_images.*, images.caption as image_caption").joins(:image).find(ti.id).attributes;nil
ThingImage.select("images.caption as image_caption").joins(:image).find(ti.id).attributes;nil
ThingImage.select("images.caption as image_caption").joins(:image).find(ti.id).attributes
pp ThingImage.find(ti.id).image.attributes
ThingImage.find(ti.id)
 ti=ThingImage.joins(:image).where.not("images.caption"=>nil).first
pp ThingImage.find(ti.id).image.attributes
continue
ThingImage.count
Thing.count
